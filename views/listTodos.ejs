<%- include('partials/header') %>
  <div class="container">
    <h1>Todos List</h1>
    <div id="todos-list"></div>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', async () => {
      const userId = '<%= userId %>';
      try {
        const response = await fetch(`http://localhost:3000/todos?executor=${userId}`);
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        const data = await response.json();
        const todosList = document.getElementById('todos-list');
        todosList.innerHTML = data.data.map(todo => `
        <div class="user">
          <p><strong>ID:</strong> ${todo._id}</p>
          <p><strong>Title:</strong> ${todo.title}</p>
          <p><strong>Deadline:</strong> ${todo.deadline}</p>
          <p><strong>Complete:</strong> ${todo.complete}</p>
          <p><strong>Executor:</strong> ${todo.executor}</p>
        </div>
      `).join('');
      } catch (error) {
        console.error('There was a problem with the fetch operation:', error);
      }
    });
  </script>
  <%- include('partials/footer') %>